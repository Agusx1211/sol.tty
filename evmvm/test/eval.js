const Eval = artifacts.require("Eval");

contract("Eval", async accounts => {
    // it("adds two numbers correctly", async () => {
    //     let instance = await Eval.deployed();
    //
    //     const res = await instance.eval.call("0x611234600220");
    // const res = await instance.eval.call("0x60ff60020160020300");
    //
    // console.log(res);
    // });

    // it("processes an empty contract correctly", async () => {
    //     const code = "0x608060405260043610603f576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063c66478d5146044575b600080fd5b348015604f57600080fd5b5060566058565b005b5600a165627a7a72305820b1541a06a51fd17e270291a458f0688105feae44b3f810c2e914659ba887688d0029";
    //     const signature = "0xc66478d5";
    //
    //     let instance = await Eval.deployed();
    //
    //     const res = await instance.eval.call(code, signature);
    // const res = await instance.eval.sendTransaction(code, signature, {from: accounts[0]});

    // console.log(res);
    // });

    it("processes fanout payments", async () => {
        const code = "0x608060405234801561001057600080fd5b5060043610610048576000357c010000000000000000000000000000000000000000000000000000000090048063c66478d51461004d575b600080fd5b610055610057565b005b6000734ce92dbef7af4e7f834b6ffa33699b601657a42990508073ffffffffffffffffffffffffffffffffffffffff1663e94f1292306040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050600060405180830381600087803b15801561010b57600080fd5b505af115801561011f573d6000803e3d6000fd5b505050508073ffffffffffffffffffffffffffffffffffffffff1663a9059cbb73fb38cb88d96276d9fb4fed67c1c9839b3d822b1b60016040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050602060405180830381600087803b1580156101db57600080fd5b505af11580156101ef573d6000803e3d6000fd5b505050506040513d602081101561020557600080fd5b8101908080519060200190929190505050508073ffffffffffffffffffffffffffffffffffffffff1663a9059cbb734787ce2dcde562dde2f9b1b14c691765ee9453d560016040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050602060405180830381600087803b1580156102cf57600080fd5b505af11580156102e3573d6000803e3d6000fd5b505050506040513d60208110156102f957600080fd5b8101908080519060200190929190505050508073ffffffffffffffffffffffffffffffffffffffff1663a9059cbb73af387e63d09dc44511241716043711c6a90c825b60016040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050602060405180830381600087803b1580156103c357600080fd5b505af11580156103d7573d6000803e3d6000fd5b505050506040513d60208110156103ed57600080fd5b8101908080519060200190929190505050508073ffffffffffffffffffffffffffffffffffffffff1663a9059cbb73081b0273cd285b7699194c346b76d5a558777b0460016040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050602060405180830381600087803b1580156104b757600080fd5b505af11580156104cb573d6000803e3d6000fd5b505050506040513d60208110156104e157600080fd5b8101908080519060200190929190505050508073ffffffffffffffffffffffffffffffffffffffff1663a9059cbb733d8cfed1cab3864d89193317076a6fe01976721560016040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050602060405180830381600087803b1580156105ab57600080fd5b505af11580156105bf573d6000803e3d6000fd5b505050506040513d60208110156105d557600080fd5b8101908080519060200190929190505050505056fea165627a7a7230582015a2f7290899d805d5fcd933948d3eac11a459e64df092eb7e683d1b548c00df0029";
        const signature = "0xc66478d5";

        let instance = await Eval.deployed();

        const res = await instance.eval.call(code, signature);
        // const res = await instance.eval.sendTransaction(code, signature, {from: accounts[0]});

        console.log(res);
    });

    // it("gets correct contract address", async () => {
    //     const code = "0x303100";
    //     const signature = "0xc66478d5";
    //
    //     let instance = await Eval.deployed();
    //
    //     const res = await instance.eval.call(code, signature);
    //
    //     console.log(res);
    // });
});
